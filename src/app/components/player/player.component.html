<div class="player">
  <h3 class="player__header">
    <img
      class="player__header__image"
      src="../../../assets/icons/playing.svg"
      alt="Playing Icon"
    />
    <span class="player__header__text">Tocando agora</span>
  </h3>

  <div class="player__preview">
    <img
      *ngIf="currentEpisode$ | async as currentEpisode; else noPodcast"
      class="player__preview__image"
      [src]="currentEpisode?.thumbnail"
      alt=""
    />

    <ng-template #noPodcast>
      <span class="player__preview__text">
        Selecione um podcast para ouvir</span
      >
    </ng-template>
  </div>

  <div
    *ngIf="currentEpisode$ | async as currentEpisode"
    class="player__details"
  >
    <h1 class="player__details__title">{{ currentEpisode.title }}</h1>
    <p class="player__details__members">{{ currentEpisode.members }}</p>
  </div>

  <div class="player__actions">
    <div class="player__actions__progress">
      <span>{{ timeElapsed$ | async | hour }}</span>
      <mat-slider
        [disabled]="!(currentEpisode$ | async)"
        (input)="sliderThumbChange($event)"
        #slider
        [max]="currentDuration$ | async"
        [value]="timeElapsed$ | async"
        step="0.1"
      ></mat-slider>
      <span>{{ currentDuration$ | async | hour }}</span>
    </div>

    <div class="player__buttons">
      <button [disabled]="!(hasNext$ | async)" mat-icon-button>
        <img src="../../../assets/icons/shuffle.svg" alt="Shuffle Button" />
      </button>
      <button
        (click)="playPrevious()"
        [disabled]="!(hasPrevious$ | async)"
        mat-icon-button
      >
        <img
          src="../../../assets/icons/play-previous.svg"
          alt="Previous Button"
        />
      </button>
      <button
        [disabled]="!(currentEpisode$ | async)"
        [ngClass]="{ playing: isPlaying$ | async }"
        (click)="togglePlay()"
        mat-icon-button
        class="play-pause"
      >
        <img
          *ngIf="isPlaying$ | async; else pause"
          src="../../../assets/icons/pause.svg"
          alt="Pause Button"
        />
        <ng-template #pause>
          <img src="../../../assets/icons/play.svg" alt="Play Button" />
        </ng-template>
      </button>
      <button
        (click)="playNext()"
        [disabled]="!(hasNext$ | async)"
        mat-icon-button
      >
        <img src="../../../assets/icons/play-next.svg" alt="Next Button" />
      </button>
      <button
        [class.active]="isLooping$ | async"
        [disabled]="!(currentEpisode$ | async)"
        (click)="setLooping()"
        mat-icon-button
      >
        <img src="../../../assets/icons/repeat.svg" alt="Repeat Button" />
        <!-- <mat-icon>repeat</mat-icon> -->
      </button>
    </div>
  </div>
</div>
